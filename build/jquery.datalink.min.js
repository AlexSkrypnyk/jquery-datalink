/* datalink jQuery plugin v.1.0.0 https://github.com/alexdesignworks/jquery-datalink | License: GPL-2.0 */!function(a,b,c){function d(b,c,d){this.name=e,this.version=f,this.defaults={callback:this.callbackBindEqual,callbackArgs:[]},this.$element=a(b),this.initSettings(c,d),this.checkDependencies(),this.init()}var e="datalink",f="1.0.0",g="datalink:change";a.extend(d.prototype,{init:function(){for(var a in this.settings)this.settings.hasOwnProperty(a)&&this.bindToElement(this.settings[a])},checkDependencies:function(){if(a.fn.observe===c)throw"Please install jquery-observer plugin"},initSettings:function(b,c){var d={},e={};if(b=this.argumentsToArray(b),!(b.length>0))throw"Target fields argument is required";e.fields=b[0],b=b.slice(1),b.length>0&&a.isFunction(b[0])&&(e.callback=b[0],b=b.slice(1)),b.length>0&&(a.isArray(b[0])||a.isFunction(b[0]))&&(e.callbackArgs=b[0],b=b.slice(1)),b.length>0&&a.isPlainObject(b[0])&&(d=b[0]),this.normaliseSettings(a.extend(!0,{},this.defaults,e,d),c)},normaliseSettings:function(b,c){var d,e,f=this;if(d="fields"in b?b.fields:a(b.field),d.each(function(){f.setSettingForField(this,b)}),c)for(e in c.settings)c.settings.hasOwnProperty(e)&&f.normaliseSettings(c.settings[e])},getSettingsForField:function(a,b){this.settings=this.settings||[];var c,d;for(c in this.settings)if(this.settings.hasOwnProperty(c)&&(d=this.settings[c],d.field===a&&d.callback===b))return this.settings[c];return null},setSettingForField:function(b,c){this.settings=this.settings||[];var d,e=this.getSettingsForField(b,c.callback);e||(d=a.extend({},c),delete d.fields,d.field=b,this.settings.push(d))},getFieldsWithCallback:function(b){this.settings=this.settings||[];var c,d,e=a();for(c in this.settings)this.settings.hasOwnProperty(c)&&(d=this.settings[c],d.callback===b&&(e=e.add(a(d.field))));return e},callbackBindEqual:function(a,b,c,d,e,f){return b},bindToElement:function(b){var c=this,d=a(b.field),e=c.getFieldsWithCallback(b.callback);e.is("input, textare")?e.on("input keyup",function(){a(this).trigger(g)}):e.observe("characterdata subtree added removed",function(){a(this).trigger(g)}),d.on(g,function(){var d,f=a(this),g=[];g.push(c.getFieldValues(c.$element).pop()),g.push(c.getFieldValues(f).pop()),g.push(c.getFieldValues(e)),g.push(c.$element),g.push(f),g.push(e),g=a.merge(g,b.callbackArgs),d=b.callback.apply(c,g),null!==d&&c.setFieldsValue(c.$element,d)})},setFieldsValue:function(b,c){b.each(function(){var b=a(this);"input"===b.prop("tagName").toLowerCase()?b.val(c.toString()):b.html(c.toString())})},getFieldValues:function(b){var c=[];return b.each(function(){var b=a(this);c.push(b.is("input, textarea")?b.val():b.html())}),c},argumentsToArray:function(a){return[].slice.apply(a)},hashCode:function(a){return a.split("").reduce(function(a,b){return a=(a<<5)-a+b.charCodeAt(0),a&a},0)}}),a.fn[e]=function(){var b=arguments;return this.each(function(){a.data(this,"plugin_"+e,new d(this,b,a.data(this,"plugin_"+e)))}),this},function(){var b=a.fn.val;a.fn.val=function(){var c=b.apply(this,arguments);return arguments.length>0&&a(this).trigger(g),c}}()}(jQuery,window);